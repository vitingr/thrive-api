name: Run Datadog Synthetic tests

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  build:
    runs-on: ubuntu-latest
    environment: datadog_variables

    steps:
    - uses: actions/checkout@v4

    - name: Run Datadog Synthetic tests
      uses: DataDog/synthetics-ci-github-action@09f14582d4356e2d1ce9c440a496ef5495b3316f
      with:
        api_key: ${{secrets.DD_API_KEY}}
        app_key: ${{secrets.DD_APP_KEY}}
        test_search_query: 'tag:e2e-tests'


