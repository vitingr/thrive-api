name: Run Datadog Synthetic tests

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  build:
    runs-on: ubuntu-latest
    environment: datadog_variables

    steps:
    - uses: actions/checkout@v4

    - name: Run Datadog Synthetic tests
      uses: DataDog/synthetics-ci-github-action@389f06ceaf17d5102ac079818c58e30ca44c683a
      with:
        api_key: ${{secrets.DD_API_KEY}}
        app_key: ${{secrets.DD_APP_KEY}}
        test_search_query: 'tag:e2e-tests'


